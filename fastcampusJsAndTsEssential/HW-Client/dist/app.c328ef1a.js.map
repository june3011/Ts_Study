{"version":3,"sources":["app.js"],"names":["container","document","getElementById","ajax","XMLHttpRequest","content","createElement","NEWS_URL","CONTENT_URL","store","currentPage","feeds","getData","url","open","send","JSON","parse","response","makeFeeds","i","length","read","newsFeed","newsList","template","push","id","title","comments_count","user","points","time_ago","replace","join","innerHTML","newsDetail","location","hash","substring","newsContent","Number","makeComment","comments","called","commentString","router","routePath","indexOf","window","addEventListener"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["const container = document.getElementById(\"root\");\r\nconst ajax = new XMLHttpRequest();\r\nconst content = document.createElement(\"div\");\r\nconst NEWS_URL = \"https://api.hnpwa.com/v0/news/1.json\";\r\nconst CONTENT_URL = \"https://api.hnpwa.com/v0/item/@id.json\";\r\nlet store = {\r\n  currentPage: 1,\r\n  feeds: [],\r\n};\r\n\r\nfunction getData(url) {\r\n  ajax.open(\"GET\", url, false);\r\n  ajax.send();\r\n\r\n  return JSON.parse(ajax.response);\r\n}\r\n\r\nfunction makeFeeds(feeds) {\r\n  for (let i = 0; i < feeds.length; i++) {\r\n    feeds.read = false;\r\n  }\r\n\r\n  return feeds;\r\n}\r\n\r\nfunction newsFeed() {\r\n  let newsFeed = store.feeds;\r\n  const newsList = [];\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen\">\r\n        <div class=\"bg-white text-xl\">\r\n            <div class=\"mx-auto px-4\">\r\n                <div class=\"flex justify-between items-center py-6\">\r\n                    <div class=\"flex justify-start\">\r\n                        <h1 class=\"font-extrabold\">Hacker News</h1>\r\n                    </div>\r\n                    <div class=\"item-center justify-end\">\r\n                        <a href=\"#/page/{{__prev_page__}}\" class=\"text-gray-500\">Previous</a>\r\n                        <a href=\"#/page/{{__next_page__}}\" class=\"text-gray-500\" ml-4>Next</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"p-4 text-2xl text-gray-700\">\r\n            {{__news_feed__}}\r\n        </div>\r\n    </div>\r\n  `;\r\n\r\n  if (newsFeed.length === 0) {\r\n    newsFeed = store.feeds = makeFeeds(getData(NEWS_URL));\r\n  }\r\n\r\n  for (let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++) {\r\n    newsList.push(`\r\n        <div class=\"p-6 ${\r\n          newsFeed[i].read ? \"bg-red-500\" : \"bg-white\"\r\n        }  mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\r\n            <div class=\"flex\">\r\n                <div class=\"flex-auto\">\r\n                    <a href=\"#/show/${newsFeed[i].id}\">${newsFeed[i].title}</a>\r\n                </div>\r\n                <div class=\"text-center text-sm\">\r\n                    <div class=\"w-10 text-white bg-green-300 rounded-lg px-0 py-2\">${\r\n                      newsFeed[i].comments_count\r\n                    }</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"flex mt-3\">\r\n                <div class=\"grid grid-cols-3 text-sm text-gray-500\">\r\n                    <div><i class=\"fas fa-user mr-1\"></i>${\r\n                      newsFeed[i].user\r\n                    }</div>\r\n                    <div><i class=\"fas fa-user mr-1\"></i>${\r\n                      newsFeed[i].points\r\n                    }</div>\r\n                    <div><i class=\"fas fa-user mr-1\"></i>${\r\n                      newsFeed[i].time_ago\r\n                    }</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `);\r\n  }\r\n\r\n  template = template.replace(`{{__news_feed__}}`, newsList.join(``));\r\n  template = template.replace(\r\n    `{{__prev_page__}}`,\r\n    store.currentPage > 1 ? store.currentPage - 1 : 1\r\n  );\r\n  template = template.replace(\r\n    `{{__next_page__}}`,\r\n    newsFeed.length / 10 > store.currentPage\r\n      ? store.currentPage + 1\r\n      : store.currentPage\r\n  );\r\n\r\n  container.innerHTML = template;\r\n}\r\n\r\nfunction newsDetail() {\r\n  const id = location.hash.substring(7);\r\n  const newsContent = getData(CONTENT_URL.replace(\"@id\", id));\r\n\r\n  let template = `\r\n        <div class=\"bg-gray-600 min-h-screen pb-8\">\r\n            <div class=\"bg-white text-xl\">\r\n                <div class=\"mx-auto px-4\">\r\n                    <div class=\"flex justify-between items-center py-6\">\r\n                        <div class=\"flex justify-start\">\r\n                            <h1 class=\"font-extrabold\">Hacker News</h1>\r\n                        </div>\r\n                        <div class=\"items-center justify-end\">\r\n                            <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\r\n                                <i class=\"fa fa-times\"></i>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"h-full border rounded-xl bg-white m-6 p-4\">\r\n                <h2>${newsContent.title}</h2>\r\n                <div class=\"text-gray-400 h-20\">\r\n                    ${newsContent.content}\r\n                </div>\r\n                {{__comments__}}\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n  for (let i = 0; i < store.feeds.length; i++) {\r\n    if (store.feeds[i].id === Number(id)) {\r\n      store.feeds[i].read = true;\r\n      break;\r\n    }\r\n  }\r\n  function makeComment(comments, called = 0) {\r\n    const commentString = [];\r\n\r\n    for (let i = 0; i < comments.length; i++) {\r\n      commentString.push(`\r\n            <div style=\"padding-left: ${called * 40}px;\", class=\"mt-4\">\r\n                <div class=\"text-gray-400\">\r\n                    <i class=\"fa fa-sort-up mr-2\"></i>\r\n                    <strong>${comments[i].user}</strong> ${comments[i].time_ago}\r\n                </div>\r\n                <p class=\"text-gray-700\">${comments[i].content}</p>\r\n            </div>\r\n        `);\r\n\r\n      if (comments[i].comments.length > 0) {\r\n        commentString.push(makeComment(comments[i].comments, called + 1));\r\n      }\r\n    }\r\n\r\n    return commentString.join(``);\r\n  }\r\n\r\n  container.innerHTML = template.replace(\r\n    `{{__comments__}}`,\r\n    makeComment(newsContent.comments)\r\n  );\r\n}\r\n\r\nfunction router() {\r\n  const routePath = location.hash;\r\n\r\n  if (routePath === \"\") {\r\n    newsFeed();\r\n  } else if (routePath.indexOf(\"#/page/\") >= 0) {\r\n    store.currentPage = Number(routePath.substring(7));\r\n    newsFeed();\r\n  } else {\r\n    newsDetail();\r\n  }\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", router);\r\n\r\nrouter();\r\n"]}